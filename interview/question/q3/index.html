<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <script>
        // let obj ={
        //     name: 'walli',
        //     age: 18,
        //     like: ['sing'],
        //     sport: {
        //         a:1,
        //         b:2
        //     }
        // }
        // 浅拷贝
        // let obj2 = Object.assign({},obj)
        // let obj3 = {...obj}
        // let obj4 = obj
        // obj.name = 'walli-new'
        // obj.like.push('coding')
        // console.log(obj2,obj3,obj4)
        // let obj5 = JSON.parse(JSON.stringify(obj))
        // obj.name = 'walli-new'
        // obj.like.push('coding')
        // obj5.sport.a=5
        // console.log(obj)        
        </script> 
    <script>
        // 递归
        function deepClone(obj,hash = new weakMap()){
            if(obj instanceof RegExp) return new RegExp(obj)
            if(obj instanceof Date) return new Date(obj)
            // 如果说不是复杂数据类型 直接返回
            if(obj === null || typeof(obj) !== 'object') {
                return obj
            }
            if(hash.has(obj)){
                return hash.get(obj)
            }
            //  如果obj 是数组 那么obj.constructor 是[function: Array]
            //  如果obj 是对象 那么obj.constructor 是[function: Object]
            let t = new obj.constructor()
            hash.set(obj,t)
            for(let key in obj){
                if(obj.hasOwnProperty(key)){
                    // 是否是自己的属性
                    t[key] = deepClone(obj[key],hash)
                }
            }
        }
    </script>
</body>
</html>